
@url=http://localhost:8000
@access=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjo0LCJ1c2VybmFtZSI6ImxhbmRmaWxsX21hbmFnZXIiLCJyb2xlIjoiTEFOREZJTExfTUFOQUdFUiIsImlhdCI6MTcxMTY3NjUzOCwiZXhwIjoxNzExNjgwMTM4fQ.WPAdDZ4eQ7ZfmvLqWsYaPwEIyqMEfbZlociPz9Gxisk

@refesh=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImxhbmRmaWxsX21hbmFnZXIiLCJpYXQiOjE3MTE2NDc0MjYsImV4cCI6MTcxMjI1MjIyNn0.dB8uUaTcOu_84lXxoHSZbBTt2NpXMi5l8X8asXDb14M

### health
GET {{url}} HTTP/1.1

### Sign in
POST {{url}}/api/auth/login HTTP/1.1
content-type: application/json

{
  "username": "landfill_manager",
  "password": "12345678"
}

### Refresh
POST {{url}}/api/auth/refresh-token HTTP/1.1
content-type: application/json

{
  "token": "{{refesh}}"
}


### Sign out
POST {{url}}/api/auth/logout HTTP/1.1
Authorization: {{access}}
content-type: application/json

{
  "token": "{{refesh}}"
}


### test
GET {{url}}/api/users/test HTTP/1.1
Authorization: {{access}}

### profile
GET {{url}}/api/profile HTTP/1.1
Authorization: {{access}}

### add user
POST {{url}}/api/users HTTP/1.1
Authorization : {{access}}
Content-Type: application/json

{
  "username": "test2",
  "email": "test2@xyz.com",
  "password": "12345678",
  "name": "test name"
}

### get all users
GET {{url}}/api/users HTTP/1.1
Authorization: {{access}}

### get all roles
GET {{url}}/api/users/roles HTTP/1.1
Authorization: {{access}}

### update role
PUT {{url}}/api/users/5/roles HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "role_name": "STS_MANAGER2"
}

###  Create role
POST {{url}}/api/rbac/roles HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "role_name": "STS_MANAGER2",
  "description": "STS Manager2"
}

### Update role
PUT {{url}}/api/rbac/roles/STS_MANAGER2 HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "role_name": "STS_MANAGER_U",
  "description": "STS Manager2 udpated"
}

### delete role
DELETE {{url}}/api/rbac/roles/STS_MANAGER2 HTTP/1.1
Authorization: {{access}}

### Create permission
POST {{url}}/api/rbac/permissions HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "permission_name": "VIEW_BILLS",
  "description": "View all bills"
}


### get permissions using pagination
GET {{url}}/api/rbac/permissions?page=5&limit=10 HTTP/1.1
Authorization: {{access}}


### Assign permission to role
POST {{url}}/api/rbac/roles/STS_MANAGER/permissions HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "permission_name": "VIEW_BILLS"
}

### get all permissions of role with pagination
GET {{url}}/api/rbac/roles/STS_MANAGER/permissions?page=1&limit=10 HTTP/1.1
Authorization: {{access}}

### delete a permission
DELETE {{url}}/api/rbac/permissions/VIEW_BILLS HTTP/1.1
Authorization: {{access}}

### delete permission from role
DELETE {{url}}/api/rbac/roles/STS_MANAGER/permissions/VIEW_BILLS HTTP/1.1
Authorization: {{access}}

### update user
PUT {{url}}/api/users/5 HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "username": "test2",
  "email": "test2@xyz.com",
  "name": "test2 name",
  "active": true,
  "banned": false
}


### Get all Vehicle
GET {{url}}/api/vehicles HTTP/1.1
Authorization: {{access}}

### Insert Vehicle - registration, type, capacity, disabled, fuel_cost_per_km_loaded, fuel_cost_per_km_unloaded, landfill_id
POST {{url}}/api/vehicles HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "registration": "test",
  "type": "Truck",
  "capacity": 0,
  "disabled": false,
  "fuel_cost_per_km_loaded": 0,
  "fuel_cost_per_km_unloaded": 0,
  "landfill_id": null
}

### Create STS
POST {{url}}/api/sts HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "zone_no": 10,
  "ward_no": 37,
  "name": "Eastern Housing LTD STS",
  "location": "Eastern Housing LTD. Aftabnagar, Rampura",
  "latitude": 23.7693,
  "longitude": 90.4382,
  "capacity": 50,
  "dump_area": 130,
  "coverage_area": 10000
}

### get all STS with pagination
GET {{url}}/api/sts?page=5&limit=10 HTTP/1.1
Authorization: {{access}}

### get STS by id
GET {{url}}/api/sts/47 HTTP/1.1
Authorization: {{access}}


### udpate STS
PUT {{url}}/api/sts/47 HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "zone_no": "10",
  "ward_no": 37,
  "name": "Eastern Housing LTD STS",
  "location": "Eastern Housing LTD. Aftabnagar, Rampura",
  "capacity": 70,
  "dump_area": 130,
  "coverage_area": 12000
}

### delete STS
DELETE {{url}}/api/sts/47 HTTP/1.1
Authorization: {{access}}

### assign manager to sts
POST {{url}}/api/sts/47/managers HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "user_id": 2
}

### unassign manager from sts
DELETE {{url}}/api/sts/47/managers/2 HTTP/1.1
Authorization: {{access}}

### get all managers of sts
GET {{url}}/api/sts/47/managers HTTP/1.1
Authorization: {{access}}

# @access=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjo0LCJ1c2VybmFtZSI6ImxhbmRmaWxsX21hbmFnZXIiLCJyb2xlIjoiTEFOREZJTExfTUFOQUdFUiIsImlhdCI6MTcxMTYzMTg5MiwiZXhwIjoxNzExNzE4MjkyfQ.CHSJZy1lykXaJlyIWw1I9gWa07ht5reeYOwvvEgUZBw

### assign vehicle to sts
POST {{url}}/api/sts/47/vehicles HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "vehicle_id": 4
}

### unassign vehicle from sts
DELETE {{url}}/api/sts/47/vehicles/4 HTTP/1.1
Authorization: {{access}}

### get all vehicles of sts
GET {{url}}/api/sts/47/vehicles HTTP/1.1
Authorization: {{access}}

### get all landfills
GET {{url}}/api/landfill HTTP/1.1
Authorization: {{access}}


### assign manager to landfill
POST {{url}}/api/landfill/1/managers HTTP/1.1
Authorization: {{access}}
Content-Type: application/json

{
  "user_id": 5
}

### unassign manager from landfill
DELETE {{url}}/api/landfill/1/managers/5 HTTP/1.1
Authorization: {{access}}

### get all managers of landfill
GET {{url}}/api/landfill/1/managers HTTP/1.1
Authorization: {{access}}

### get fleet information
GET {{url}}/api/routes/fleet/suggest HTTP/1.1
Authorization: {{access}}

### Get all routes
GET {{url}}/api/routes HTTP/1.1
Authorization: {{access}}

### Get Landfill Bills
GET {{url}}/api/landfill/bills HTTP/1.1
Authorization: {{access}}